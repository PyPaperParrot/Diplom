# 2. Поиск оптимального числа гауссиан в смеси

Посмотрим как будет меняться BIC с увеличением количества компонент гауссовой смеси на дневных, часовых и минутных возвратах. Построим графики зависимости BIC и градиента BIC от количества компонент и выберем разбиение с наименьшим значением BIC

## Дневные возвраты

n_components = np.arange(2, 50)
bics, bics_err = BIC_evaluation(day_return, n_components)

_____________________________________
n_components: 2	mean BIC: -33311.98771770943
_____________________________________
n_components: 3	mean BIC: -33308.242125144076
_____________________________________
n_components: 4	mean BIC: -33289.190956280625
_____________________________________
n_components: 5	mean BIC: -33360.79588698082
_____________________________________
n_components: 6	mean BIC: -33335.17681862144
_____________________________________
n_components: 7	mean BIC: -33337.964320676416
_____________________________________
n_components: 8	mean BIC: -33331.68529551406
_____________________________________
n_components: 9	mean BIC: -33308.93009364965
_____________________________________
n_components: 10	mean BIC: -33299.21295435732
_____________________________________
n_components: 11	mean BIC: -33272.558001706995
_____________________________________
n_components: 12	mean BIC: -33176.20381714129
_____________________________________
n_components: 13	mean BIC: -33151.58678514172
_____________________________________
n_components: 14	mean BIC: -33127.18401579758
_____________________________________
n_components: 15	mean BIC: -33101.964620484374
_____________________________________
n_components: 16	mean BIC: -33077.24889865389
_____________________________________
n_components: 17	mean BIC: -33051.99636036921
_____________________________________
n_components: 18	mean BIC: -33026.880092870924
_____________________________________
n_components: 19	mean BIC: -33000.231708933024
_____________________________________
n_components: 20	mean BIC: -32970.279856954236
_____________________________________
n_components: 21	mean BIC: -32945.18996881239
_____________________________________
n_components: 22	mean BIC: -32920.29401345332
_____________________________________
n_components: 23	mean BIC: -32895.127443371035
_____________________________________
n_components: 24	mean BIC: -32870.35116955563
_____________________________________
n_components: 25	mean BIC: -32845.46356296707
_____________________________________
n_components: 26	mean BIC: -32820.62395619541
_____________________________________
n_components: 27	mean BIC: -32795.45301224479
_____________________________________
n_components: 28	mean BIC: -32770.37869231264
_____________________________________
n_components: 29	mean BIC: -32745.428579335592
_____________________________________
n_components: 30	mean BIC: -32720.337988210053
_____________________________________
n_components: 31	mean BIC: -32695.460059282716
_____________________________________
n_components: 32	mean BIC: -32670.479496882122
_____________________________________
n_components: 33	mean BIC: -32645.31339090702
_____________________________________
n_components: 34	mean BIC: -32620.309872776124
_____________________________________
n_components: 35	mean BIC: -32595.15711109093
_____________________________________
n_components: 36	mean BIC: -32570.032873174
_____________________________________
n_components: 37	mean BIC: -32544.87279441074
_____________________________________
n_components: 38	mean BIC: -32519.769402631275
_____________________________________
n_components: 39	mean BIC: -32494.630328450054
_____________________________________
n_components: 40	mean BIC: -32469.480885986864
_____________________________________
n_components: 41	mean BIC: -32444.308827673718
_____________________________________
n_components: 42	mean BIC: -32419.10136704177
_____________________________________
n_components: 43	mean BIC: -32393.944974075945
_____________________________________
n_components: 44	mean BIC: -32368.785963029226
_____________________________________
n_components: 45	mean BIC: -32343.617868806603
_____________________________________
n_components: 46	mean BIC: -32318.43435444498
_____________________________________
n_components: 47	mean BIC: -32293.24025869006
_____________________________________
n_components: 48	mean BIC: -32268.07907737608
_____________________________________
n_components: 49	mean BIC: -32242.899535662807


Из графиков видно, что лучшим числом разбиений данных на кластеры будет 5. Проверим насколько хорошо смесь из 5 гауссиан приблизит эмпирическое распределение дневных возвратов. Особое внимание уделим хвостам, т.к. именно риски/ редкие события с большим отклонением от вершины распределения интересуют нас больше всего.

## Часовые возвраты 

n_components = np.arange(2, 50)
bics, bics_err = BIC_evaluation(hour_return, n_components)

_____________________________________
n_components: 2	mean BIC: -1135597.8123708866
_____________________________________
n_components: 3	mean BIC: -1135733.103384498
_____________________________________
n_components: 4	mean BIC: -1133760.4955277205
_____________________________________
n_components: 5	mean BIC: -1134397.6659170752
_____________________________________
n_components: 6	mean BIC: -1134118.3986977583
_____________________________________
n_components: 7	mean BIC: -1134311.383455732
_____________________________________
n_components: 8	mean BIC: -1134075.7721280397
_____________________________________
n_components: 9	mean BIC: -1134033.7407713397
_____________________________________
n_components: 10	mean BIC: -1134156.6628933684
_____________________________________
n_components: 11	mean BIC: -1134052.9598935696
_____________________________________
n_components: 12	mean BIC: -1134047.0012965447
_____________________________________
n_components: 13	mean BIC: -1133993.9751009876
_____________________________________
n_components: 14	mean BIC: -1133952.7700247732
_____________________________________
n_components: 15	mean BIC: -1133935.3391530754
_____________________________________
n_components: 16	mean BIC: -1133872.7097698608
_____________________________________
n_components: 17	mean BIC: -1133871.1043482143
_____________________________________
n_components: 18	mean BIC: -1133808.1469637856
_____________________________________
n_components: 19	mean BIC: -1133771.808024208
_____________________________________
n_components: 20	mean BIC: -1133737.2075252864
_____________________________________
n_components: 21	mean BIC: -1133680.1544958246
_____________________________________
n_components: 22	mean BIC: -1133647.5138712921
_____________________________________
n_components: 23	mean BIC: -1133610.2270729812
_____________________________________
n_components: 24	mean BIC: -1133569.8784964376
_____________________________________
n_components: 25	mean BIC: -1133533.6963951294
_____________________________________
n_components: 26	mean BIC: -1133498.1716101328
_____________________________________
n_components: 27	mean BIC: -1133391.5201013703
_____________________________________
n_components: 28	mean BIC: -1133405.7112862156
_____________________________________
n_components: 29	mean BIC: -1133348.7830165175
_____________________________________
n_components: 30	mean BIC: -1133265.547723046
_____________________________________
n_components: 31	mean BIC: -1133230.6147792547
_____________________________________
n_components: 32	mean BIC: -1133195.7068613588
_____________________________________
n_components: 33	mean BIC: -1133161.398631919
_____________________________________
n_components: 34	mean BIC: -1133127.1396289736
_____________________________________
n_components: 35	mean BIC: -1133090.3143250514
_____________________________________
n_components: 36	mean BIC: -1133058.86118377
_____________________________________
n_components: 37	mean BIC: -1133022.913805267
_____________________________________
n_components: 38	mean BIC: -1132987.5839720687
_____________________________________
n_components: 39	mean BIC: -1132952.3926951527
_____________________________________
n_components: 40	mean BIC: -1132915.4321787292
_____________________________________
n_components: 41	mean BIC: -1132882.0540238405
_____________________________________
n_components: 42	mean BIC: -1132847.1388302676
_____________________________________
n_components: 43	mean BIC: -1132812.1072248905
_____________________________________
n_components: 44	mean BIC: -1132777.2959381444
_____________________________________
n_components: 45	mean BIC: -1132742.8938774236
_____________________________________
n_components: 46	mean BIC: -1132707.173928473
_____________________________________
n_components: 47	mean BIC: -1132672.629273035
_____________________________________
n_components: 48	mean BIC: -1132637.670460561
_____________________________________
n_components: 49	mean BIC: -1132603.223743258


